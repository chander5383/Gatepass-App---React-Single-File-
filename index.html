<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GWTPL Gate Pass — Final</title>

<!-- external libs -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

<!-- local css -->
<link rel="stylesheet" href="style.css">

</head>
<body>

<div class="topbar">
  <button class="btn" id="savePrint">Save & Print</button>
  <button class="btn secondary" id="downloadPdf">Download PDF</button>
  <button class="btn secondary" id="resetBtn">Reset</button>

  <div style="display:flex;gap:8px;align-items:center;margin-left:10px">
    <input id="duplicateGPNo" placeholder="Old GP no to duplicate" style="padding:8px;border-radius:6px;border:1px solid var(--border)">
    <button class="small" id="fetchDuplicate">Duplicate Print</button>
  </div>

  <label style="display:flex;align-items:center;gap:8px;margin-left:12px">
    <input type="checkbox" id="printMrPrefix"> <span style="font-weight:700;color:var(--muted);font-size:13px">Print 'Mr.' before Authorised Name</span>
  </label>

  <div class="hint">Ready — replace GOOGLE_SCRIPT_URL above if needed</div>
</div>

<div class="preview-wrap">
  <article class="paper" id="paper" role="document" aria-label="Gate Pass preview">
    <div class="outer-border"></div>
    <div class="watermark" aria-hidden="true"><img src="https://gwtpl.co/logo.png" alt="wm"></div>

    <header>
      <div class="logo"><img src="https://gwtpl.co/logo.png" alt="logo"></div>
      <div class="center-title">
        <h1>Globus Warehousing and Trading Pvt. Ltd.</h1>
        <p id="aboTitle">Abohar</p>
      </div>
      <div class="qr-box" id="qrcode">
        <div class="copy-badge" id="previewCopyBadge"><span class="label-text">[ OFFICE COPY ]</span></div>
      </div>
    </header>

    <div class="center-info">
      <div class="info-card"><div class="label">Gate Pass No.</div><div class="value" id="gpNo">GWTPL/ABO/2025/0001</div></div>
      <div class="info-card"><div class="label">Type</div><div><select id="gpType" style="border:none;background:transparent;font-weight:700"><option>Stock Transfer Voucher</option><option selected>Stock Transfer Returnable</option><option>Transfer</option></select></div></div>
      <div class="info-card"><div class="label">Date</div><div><input type="date" id="gpDate" style="border:none;background:transparent;font-weight:700" max=""></div></div>
    </div>

    <section class="form-grid">
      <div class="field"><label>Consignor</label><input type="text" id="consignor" placeholder="e.g. Muktsar-2"></div>
      <div class="field"><label>Person Carrying</label><input type="text" id="personCarrying" placeholder="Name"></div>
      <div class="field"><label>Vehicle No.</label><input type="text" id="vehicleNo" placeholder="Vehicle No"></div>
      <div class="field"><label>Consignee Unit</label><input type="text" id="consignee" value="GWTPL Abohar" readonly></div>
      <div class="field"><label>Authorised Person</label><input type="text" id="authPerson" placeholder="Name"></div>
    </section>

    <div class="toggles">
      <label><input type="checkbox" id="toggleTag"> Enable Tag No</label>
      <label><input type="checkbox" id="toggleSr"> Enable SR No</label>
      <label><input type="checkbox" id="toggleRemarks"> Enable Remarks</label>
      <div style="margin-left:auto;color:var(--muted)" id="subTotals">Subtotal: -</div>
    </div>

    <div class="items-wrap">
      <div class="scroll">
        <table class="items" id="itemsTable" role="table" aria-label="Item details">
          <thead id="itemsHead"></thead>
          <tbody id="itemsBody"></tbody>
        </table>
      </div>

      <div class="actions-row">
        <button class="btn add" id="addItem">+ Add Item (Ctrl+Enter)</button>
        <div style="margin-left:auto;color:var(--muted);font-weight:700" id="unitTotals">Unit totals: -</div>
      </div>
    </div>

    <div class="sig-outer">
      <strong>Consignee / Issued By</strong>
      <div class="sig-row" style="margin-top:8px">
        <div class="sig-block">
          <div class="label">For Security</div>
          <div class="row-input"><div style="min-width:140px">Outward Reg. Sr No:</div><input type="text" id="outward1" placeholder=""></div>
          <div class="row-input"><div style="min-width:140px">Date:</div><input type="date" id="secDate1" class="small-input"></div>
          <div style="height:6px"></div>
          <div class="stamp-area preview-blur">Stamp &amp; Sign</div>
        </div>

        <div class="sig-block">
          <div class="label">For Authorised Person</div>
          <div class="row-input"><div style="min-width:80px">Name:</div><input type="text" id="authName1" placeholder=""></div>
          <div class="row-input"><div style="min-width:80px">Designation:</div><input type="text" id="authDesig1" placeholder=""></div>
          <div style="height:6px"></div>
          <div class="stamp-area preview-blur">Stamp &amp; Sign</div>
        </div>
      </div>
    </div>

    <div class="sig-outer">
      <strong>Consignee / Received By</strong>
      <div class="sig-row" style="margin-top:8px">
        <div class="sig-block">
          <div class="label">For Security</div>
          <div class="row-input"><div style="min-width:140px">Outward Reg. Sr No:</div><input type="text" id="outward2" placeholder=""></div>
          <div class="row-input"><div style="min-width:140px">Date:</div><input type="date" id="secDate2" class="small-input"></div>
          <div style="height:6px"></div>
          <div class="stamp-area preview-blur">Stamp &amp; Sign</div>
        </div>

        <div class="sig-block">
          <div class="label">For Authorised Person</div>
          <div class="row-input"><div style="min-width:80px">Name:</div><input type="text" id="authName2" placeholder=""></div>
          <div class="row-input"><div style="min-width:80px">Designation:</div><input type="text" id="authDesig2" placeholder=""></div>
          <div style="height:6px"></div>
          <div class="stamp-area preview-blur">Stamp &amp; Sign</div>
        </div>
      </div>
    </div>

    <div class="remarks" style="margin-top:12px">
      <label>Remarks</label>
      <textarea id="remarks" placeholder="Type remarks here"></textarea>
    </div>

    <div class="printed-info" id="printedInfo"></div>
  </article>
</div>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<!-- local js -->
<script src="script.js"></script>
</body>
</html>
